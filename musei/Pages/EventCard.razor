@page "/eventcard"

@using Radzen
@using Microsoft.Maui.Graphics
@using musei.Data
@inject CosmosService cs


<style>
    .flexRow {
        display: flex;
        flex-direction: row;
    }

    .flexColumn {
        display: flex;
        flex-direction: column;
        gap: 0.5em;
    }

    .textIcon {
        display: flex;
        flex-direction: row;
        margin-left: auto;
        margin-right: 0;
        justify-content: flex-end;
        gap: 5px;
    }

    img {
        max-width: 100%;
    }
</style>

<RadzenCard class="flexColumn">
    <RadzenButton Variant="Variant.Text" Click=@(args => OnClickEvent())>
        <img src=@ImagePath />
    </RadzenButton>
    <div class="flexRow">
        <div>count = @cs.museums.Count</div>
        <RadzenButton Variant="Variant.Text" Click=@(args => OnClickEvent()) Text=@e.name Size="ButtonSize.Large" />

        <div class="textIcon">
            <RadzenText TextStyle="TextStyle.H5" TextAlign="TextAlign.Right">@e.startTime.ToShortTimeString() </RadzenText>
            <RadzenIcon Icon="schedule" />
        </div>
    </div>
    <div class="flexRow">
        <RadzenText TextStyle="TextStyle.H5" TextAlign="TextAlign.Left">@cs.museums[e.museum].name</RadzenText>
        <div class="textIcon">
            <RadzenText TextStyle="TextStyle.H5" TextAlign="TextAlign.Right">@e.startTime.ToShortDateString()</RadzenText>
            <RadzenIcon Icon="event" />
        </div>
    </div>

    <div>@e.description</div>
</RadzenCard>

@code {
    Dictionary<string, Museum> museums = new Dictionary<string, Museum>();

    [Parameter]
    public Event e { get; set; }

    [Parameter]
    public string ImagePath { get; set; }

    //protected override async Task OnInitializedAsync()
    //{
    //    museums = await cs.GetMuseums();
    //}

    async void OnClickEvent()
    {
        await App.Current.MainPage.Navigation.PushAsync(new xEventPage());
    }
}

